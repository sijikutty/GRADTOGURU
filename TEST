# Find the iframe with the title "Process Detail"
iframe_id = None

# Get all iframes
iframes = page.query_selector_all('iframe')

# Iterate through each iframe to find the correct one
for iframe in iframes:
    # Switch to the iframe's context
    frame = iframe.content_frame()
    if frame:
        # Retrieve the document title inside the iframe
        title = frame.evaluate("document.title")
        
        if title == "Process Detail":
            # Fetch the id of the iframe with the matching title
            iframe_id = iframe.evaluate("this.id")
            break

# Print the iframe_id
print(f"Iframe ID: {iframe_id}")

# Use the iframe_id to create a frame locator if found
if iframe_id:
    popup_dialog = page.frame_locator(f"iframe#{iframe_id}")
    popup_dialog.get_by_role("link", name="View Log/Trace").click()
else:
    print("No iframe with title 'Process Detail' found.")
