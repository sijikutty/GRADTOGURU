    screenshot_path = f"Result\\{request.function.__name__}.png"

    # Wait for the page to be fully loaded
    page.wait_for_load_state('networkidle')  # Ensure the page is idle

    # Measure time taken for the screenshot
    start_time = time.time()
    page.screenshot(path=screenshot_path, timeout=120000)  # Increased timeout
    print(f"Screenshot taken in {time.time() - start_time} seconds")
