page.frame_locator("iframe[name=\"TargetContent\"]").locator("[id=\"CURR_STP_TGTF_CHARTFIELD_VALUE\\$1\"]"

# Access the iframe
frame = page.frame("TargetContent")

# Get all rows in the table (adjust the selector based on your table structure)
rows = frame.locator("table tbody tr")

# Get the count of rows
row_count = rows.count()
found_book = False  # Flag to track if "book" is found

for i in range(row_count):
    # Locate the dropdown in the current row
    dropdown = rows.nth(i).locator("select[id^='CURR_STP_TGTF_FIELDNAME']")

    # Get the selected option's text
    selected_option = dropdown.locator("option:checked").inner_text()

    # Check if the selected option is "book"
    if selected_option == 'book':
        print(f"Row {i + 1}: The selected option is 'book'.")
        found_book = True  # Update the flag
        break  # Exit the loop since we found the value

if not found_book:
    print("No dropdowns have 'book' selected in any row.")
