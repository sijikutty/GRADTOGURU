from playwright.sync_api import sync_playwright

def run(playwright):
    browser = playwright.chromium.launch(headless=False)
    page = browser.new_page()

    # Step 1: Navigate to the main page
    page.goto("https://example.com")

    # Step 2: Open the first popup by clicking 'Copy to File'
    first_popup = page.expect_popup(
        lambda: page.get_by_role("button", name="Copy to File").click()
    )

    # Step 3: In the first popup, click the 'Run' button
    second_popup = first_popup.expect_popup(
        lambda: first_popup.get_by_role("button", name="Run").click()
    )

    # Step 4: In the second popup, click the 'OK' button
    second_popup.get_by_role("button", name="OK").click()

    # Optional: Close the popups if needed
    first_popup.close()
    second_popup.close()
    browser.close()

with sync_playwright() as playwright:
    run(playwright)
