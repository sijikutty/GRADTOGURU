import pytest
from playwright.sync_api import Page
from automation_utils import get_testdata, connect_to_oracleDB

@pytest.mark.parametrize("testcase", get_testdata("test_PS_EGL_DB_connectivity"))
def test_PS_EGL_DB_connectivity(page: Page, testcase):
    testdata = testcase["testdata"]
    
    # Call the function you want to test
    result = connect_to_oracleDB(testdata["secretID"])

    # Assert the expected result or behavior
    assert result["status"] == True, f"DB connectivity test failed: {result['error']}"

    # Print test success message for visibility
    print(f"Test case {testcase['testcase_id']} executed successfully.")
